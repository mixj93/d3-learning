<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://d3js.org/d3.v6.min.js"></script>
    <title>如何添加坐标轴</title>

    <style>
      .axis path,
      .axis line {
        fill: none;
        stroke: black;
        shape-rendering: crispEdges;
      }

      .axis text {
        font-family: sans-serif;
        font-size: 11px;
      }
    </style>
  </head>
  <body>
    <!-- https://blog.csdn.net/lzhlzz/article/details/34070839 -->

    <script>
      var width = 600
      var height = 600
      var dataset = [30, 20, 45, 12, 21]

      var xScale = d3
        .scaleLinear()
        .domain([0, d3.max(dataset)])
        .range([0, 600])
      var axis = d3.axisBottom().scale(xScale)

      var svg = d3
        .select('body')
        .append('svg')
        .attr('width', width)
        .attr('height', height)

      var dataset = [30, 20, 45, 12, 21]

      var wx = d3
        .scaleLinear()
        .domain([0, d3.max(dataset)])
        .range([0, 580])

      svg
        .append('g')
        .attr('class', 'axis')
        .attr('transform', 'translate(10,160)')
        .call(axis)

      svg
        .selectAll('rect') // 在 svg 中选择所有的 rect 元素，但是实际上这时候 svg 中还不存在 rect 元素。这是 D3 一个比较特殊的地方，即它能够选择一个空集
        .data(dataset)
        .enter() // enter 表示当所需要的元素（这里为 rect ）比绑定的数据集合的元素（这里为 dataset ）少时，自动添加位置，使得与数据集合的数量一样多。这里很重要。
        .append('rect')
        .attr('x', 10)
        .attr('y', function (d, i) {
          return i * 30
        })
        .attr('width', wx)
        .attr('height', 28)
        .attr('fill', 'red')
    </script>
  </body>
</html>
